!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["form-table"]=t():e["form-table"]=t()}(this,(function(){return function(e){function t(t){for(var n,r,o=t[0],i=t[1],s=0,c=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&c.push(a[r][0]),a[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(l&&l(t);c.length;)c.shift()()}var n={},a={0:0};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=o);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(e){return r.p+""+e+".index.js"}(e);var l=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}a[e]=void 0}};var c=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var o=this.webpackJsonpform_table=this.webpackJsonpform_table||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var l=i;return r(r.s=5)}([function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t.default=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{titles:{type:Array,default:function(){return[]}},tableColumnWidth:{type:Number,default:120},initGetList:{type:Boolean,default:!0},formOptions:{type:Object},fetchData:{type:Object,required:!0},columns:{type:Array,required:!0},params:{type:Object,default:function(){return{}}}},data:function(){return{result:{},listLoading:!1,size:"small",tableData:[],total:0,currentPage:1,pageSize:10}},created:function(){this.initGetList&&this.initData()},methods:{changeDate:function(e,t){e||(e=["",""]),this.$set(this.params,t.prop[0],e[0]),this.$set(this.params,t.prop[1],e[1])},initData:function(){this.currentPage=1,this.getList()},getList:function(){var e=this,t={},n=this.fetchData.url;if(n){var a=this.fetchData.method||"get";"get"===(a=a.toLowerCase())?(n+="?size="+this.pageSize+"&current="+this.currentPage,Object.keys(this.params).forEach((function(t){0!==t.indexOf("_")&&t&&e.params[t]&&(n+="&"+t+"="+e.params[t])}))):"post"===a&&(t.data=this.fetchData.data),t.url=n,t.method=this.fetchData.method,this.listLoading=!0,this.$axios(t).then((function(t){e.listLoading=!1,"1000"===t.code?(e.tableData=t.data.content,e.result=t.data,e.total=t.data.total):e.$message.error(t.msg||"获取数据失败")})).catch((function(){e.listLoading=!1,e.$message.error("获取数据失败")}))}},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},formatJson:function(e,t){var n=this;return t.map((function(t){return e.map((function(e){return n.handleColumn(t,e)}))}))},getSizeToList:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return new Promise((function(a,r){var o={},i=t.fetchData.url;if(i){var s=t.fetchData.method||"get";"get"===(s=s.toLowerCase())?(i+="?size="+n+"&current="+e,Object.keys(t.params).forEach((function(e){0!==e.indexOf("_")&&e&&t.params[e]&&(i+="&"+e+"="+t.params[e])}))):"post"===s&&(o.data=t.fetchData.data),o.url=i,o.method=t.fetchData.method,t.$axios(o).then((function(e){"1000"===e.code?a(e.data.content):r(new Error)})).catch((function(e){r(e)}))}}))},exportExcel:function(){for(var e=this,t=this.$loading({lock:!0,text:"下载中..."}),a=parseInt(this.$route.query.downSize)||2e3,r=Math.ceil(this.total/a),o=[],i=1;i<=r;i++)o.push(this.getSizeToList(i,a));Promise.all(o).then((function(a){var r=[];a.forEach((function(e){r=r.concat(e)})),Promise.all([n.e(1),n.e(2)]).then(n.t.bind(null,11,7)).then((function(n){var a=e.columns.filter((function(e){return void 0!==e.prop})),o=a.map((function(e){return e.label})),i=a.map((function(e){return e.prop})),s=e.formatJson(i,r);n.export_json_to_excel({header:o,data:s,filename:e.$route.meta.title||"列表数据"}),t.close()}))})).catch((function(){t.close(),e.$message.error("下载表格失败")}))},handleColumn:function(e,t){return t.split(".").forEach((function(t){e=e[t]})),void 0!==e&&""!==e||(e="-"),e},indexMethod:function(e){return(this.currentPage-1)*this.pageSize+e+1}},filters:{handleColumn:function(e,t){return t.split(".").forEach((function(t){e=e[t]})),void 0!==e&&""!==e||(e="-"),e}}}},function(e,t,n){var a=n(8);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(10)(a,r);a.locals&&(e.exports=a.locals)},function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.titles.length?n("div",{staticClass:"header-title"},e._l(e.titles,(function(t,a){return n("div",{key:a,staticClass:"header-title-item"},[n("span",{staticClass:"header-title-label"},[e._v(e._s(t.label))]),e._v(" "),n("span",{staticClass:"header-title-content"},[e._v(e._s(e.result[t.key]))])])})),0):e._e(),e._v(" "),e.formOptions?n("div",{staticClass:"header-form"},[e._t("formItem"),e._v(" "),e._l(e.formOptions.forms,(function(t,a){return n("div",{key:a,staticClass:"header-form-item"},[n("span",{staticClass:"header-form-label"},[e._v(e._s(t.label))]),e._v(" "),"input"===t.itemType||void 0===t.itemType?n("el-input",{style:{width:(t.itemWidth||120)+"px"},attrs:{size:t.size?t.size:e.size,placeholder:t.placeholder},model:{value:e.params[t.modelValue],callback:function(n){e.$set(e.params,t.modelValue,n)},expression:"params[form.modelValue]"}}):"select"===t.itemType?n("el-select",{style:{width:(t.itemWidth||120)+"px"},attrs:{size:t.size?t.size:e.size,disabled:t.disabled,placeholder:t.placeholder},model:{value:e.params[t.modelValue],callback:function(n){e.$set(e.params,t.modelValue,n)},expression:"params[form.modelValue]"}},e._l(t.options,(function(e,a){return n("el-option",{key:a+"_local",attrs:{value:"object"==typeof e?e[t.valueKey||"value"]:e,label:"object"==typeof e?e[t.labelKey||"label"]:e}})})),1):"date"===t.itemType?n("el-date-picker",{style:{width:(t.itemWidth||240)+"px"},attrs:{format:t.format||"yyyy.MM.dd","value-format":t.format||"yyyy.MM.dd",type:"date",placeholder:t.placeholder,size:t.size?t.size:e.size,disabled:t.disabled,readonly:t.readonly,editable:t.editable,"picker-options":t.pickerOptions||{}},model:{value:e.params[t.modelValue],callback:function(n){e.$set(e.params,t.modelValue,n)},expression:"params[form.modelValue]"}}):"daterange"===t.itemType?n("el-date-picker",{style:{width:(t.itemWidth||240)+"px"},attrs:{format:t.format||"yyyy.MM.dd","value-format":t.format||"yyyy.MM.dd",size:t.size?t.size:e.size,type:"daterange",disabled:t.disabled,readonly:t.readonly,editable:t.editable,"range-separator":t.rangeSeparator,"start-placeholder":t.startPlaceholder,"end-placeholder":t.endPlaceholder,"picker-options":t.pickerOptions||{}},on:{change:function(n){return e.changeDate(n,t)}},model:{value:e.params[t.modelValue],callback:function(n){e.$set(e.params,t.modelValue,n)},expression:"params[form.modelValue]"}}):e._e()],1)})),e._v(" "),e._t("formItemEnd"),e._v(" "),e.formOptions.closeSearch?e._e():n("div",{staticClass:"header-form-item"},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.initData}},[e._v("\n        搜索\n      ")])],1),e._v(" "),e.formOptions.closeDown?e._e():n("div",{staticClass:"header-form-item"},[n("el-button",{staticClass:"green",attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("\n        导出EXCEL\n      ")])],1),e._v(" "),e._t("formItemButton")],2):e._e(),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[e._l(e.columns,(function(t,a){return["index"===t.type?n("el-table-column",e._b({key:a,attrs:{index:e.indexMethod,align:"center"}},"el-table-column",t,!1)):t.type?n("el-table-column",e._b({key:a,attrs:{align:"center"}},"el-table-column",t,!1)):n("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label,sortable:t.sortable,width:t.minWidth?"-":t.width||e.tableColumnWidth,minWidth:t.minWidth||t.width||e.tableColumnWidth,align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t.render?n("span",[e._v("\n            "+e._s(t.render(a.row))+"\n          ")]):n("span",[e._v("\n            "+e._s(e._f("handleColumn")(a.row,t.prop))+"\n          ")])]}}],null,!0)})]})),e._v(" "),e._t("append")],2),e._v(" "),n("div",{staticClass:"pagination-center"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},r=[];a._withStripped=!0,n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},function(e,t,n){"use strict";function a(e,t,n,a,r,o,i,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(6),o=(a=r)&&a.__esModule?a:{default:a};var i={install:function(e,t){e.component("form-table",o.default),t.axios&&(e.prototype.$axios=t.axios)}};t.default=i},function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n(7);var i=n(4),s=Object(i.a)(r.default,a.a,a.b,!1,null,"f2466236",null);s.options.__file="src/el-form-table/index.vue",t.default=s.exports},function(e,t,n){"use strict";var a=n(2);n.n(a).a},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,"\n.header-form[data-v-f2466236] {\n  margin-bottom: 10px;\n  display: flex;\n  align-content: center;\n  flex-wrap: wrap;\n}\n.header-form-item[data-v-f2466236] {\n  margin-right: 12px;\n  margin-bottom: 10px;\n}\n.header-form-label[data-v-f2466236] {\n    font-size: 14px;\n    color: #909399;\n}\n.pagination-center[data-v-f2466236] {\n  margin-top: 30px;\n  text-align: center;\n}\n.header-title[data-v-f2466236] {\n  display: flex;\n  margin-bottom: 20px;\n  font-size: 18px;\n  color: #777;\n}\n.header-title-item[data-v-f2466236] {\n    margin-right: 15px;\n    display: flex;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var r=(i=a,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),o=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot).concat(e," */")}));return[n].concat(o).concat([r]).join("\n")}var i,s,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},r=0;r<this.length;r++){var o=this[r][0];null!=o&&(a[o]=!0)}for(var i=0;i<e.length;i++){var s=e[i];null!=s[0]&&a[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),t.push(s))}},t}},function(e,t,n){"use strict";var a,r={},o=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function s(e,t){for(var n=[],a={},r=0;r<e.length;r++){var o=e[r],i=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};a[i]?a[i].parts.push(s):n.push(a[i]={id:i,parts:[s]})}return n}function l(e,t){for(var n=0;n<e.length;n++){var a=e[n],o=r[a.id],i=0;if(o){for(o.refs++;i<o.parts.length;i++)o.parts[i](a.parts[i]);for(;i<a.parts.length;i++)o.parts.push(v(a.parts[i],t))}else{for(var s=[];i<a.parts.length;i++)s.push(v(a.parts[i],t));r[a.id]={id:a.id,refs:1,parts:s}}}}function c(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var a=n.nc;a&&(e.attributes.nonce=a)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,a){var r=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var o=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function p(e,t,n){var a=n.css,r=n.media,o=n.sourceMap;if(r&&e.setAttribute("media",r),o&&btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var h=null,m=0;function v(e,t){var n,a,r;if(t.singleton){var o=m++;n=h||(h=c(t)),a=f.bind(null,n,o,!1),r=f.bind(null,n,o,!0)}else n=c(t),a=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=s(e,t);return l(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var i=n[o],c=r[i.id];c&&(c.refs--,a.push(c))}e&&l(s(e,t),t);for(var u=0;u<a.length;u++){var d=a[u];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete r[d.id]}}}}}]).default}));